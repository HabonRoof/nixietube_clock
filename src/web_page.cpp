#include "web_page.h"

// TODO: Optimize the UI for smartphone user
// use browser build-in calender or clock to set the time
const char kIndexHtml[] =
    "<!DOCTYPE html>\n"
    "<html lang=\"en\">\n"
    "<head>\n"
    "<meta charset=\"utf-8\">\n"
    "<meta name=\"viewport\" content=\"width=device-width,initial-scale=1\">\n"
    "<title>Nixie Clock Setup</title>\n"
    "<style>body{font-family:Arial,sans-serif;margin:20px;color:#222}label{display:block;margin:12px 0 6px}input,select{width:100%;padding:8px;margin-bottom:8px}button{padding:10px 16px}</style>\n"
    "</head>\n"
    "<body>\n"
    "<h2>Nixie Clock Setup</h2>\n"
    "<form id=\"cfg\">\n"
    "<label>Timezone (UTC offset hours)</label>\n"
    "<input type=\"number\" id=\"tz\" min=\"-12\" max=\"14\">\n"
    "<label>Set Time (YYYY-MM-DD HH:MM:SS)</label>\n"
    "<input type=\"text\" id=\"time\" placeholder=\"2026-01-22 22:00:00\">\n"
    "<label>Alarm Enabled</label>\n"
    "<select id=\"alarm_en\"><option value=\"0\">Off</option><option value=\"1\">On</option></select>\n"
    "<label>Alarm Time (HH:MM:SS)</label>\n"
    "<input type=\"text\" id=\"alarm\" placeholder=\"07:00:00\">\n"
    "<label>Backlight RGB (R,G,B)</label>\n"
    "<input type=\"text\" id=\"rgb\" placeholder=\"0,255,255\">\n"
    "<label>Backlight Brightness (0-255)</label>\n"
    "<input type=\"number\" id=\"brightness\" min=\"0\" max=\"255\">\n"
    "<label>Audio Volume (0-30)</label>\n"
    "<input type=\"number\" id=\"volume\" min=\"0\" max=\"30\">\n"
    "<button type=\"button\" onclick=\"save()\">Save</button>\n"
    "</form>\n"
    "<pre id=\"status\"></pre>\n"
    "<script>\n"
    "async function load(){const r=await fetch('/api/settings');const j=await r.json();\n"
    "document.getElementById('tz').value=j.tz_offset;\n"
    "document.getElementById('alarm_en').value=j.alarm_enabled?1:0;\n"
    "document.getElementById('alarm').value=j.alarm_time;\n"
    "document.getElementById('rgb').value=j.backlight_rgb;\n"
    "document.getElementById('brightness').value=j.backlight_brightness;\n"
    "document.getElementById('volume').value=j.volume;\n"
    "}\n"
    "async function save(){\n"
    "const body={tz_offset:parseInt(tz.value),time:time.value,alarm_enabled:alarm_en.value==1,alarm_time:alarm.value,backlight_rgb:rgb.value,backlight_brightness:parseInt(brightness.value),volume:parseInt(volume.value)};\n"
    "const r=await fetch('/api/settings',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(body)});\n"
    "const t=await r.text();document.getElementById('status').textContent=t;\n"
    "}\n"
    "load();\n"
    "</script>\n"
    "</body>\n"
    "</html>\n";
